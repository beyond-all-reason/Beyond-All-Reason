
#include "../recoil_common_includes.h"

piece
    base,
    wing1,
    wing2,
    doorR,
    doorL,
    greebles,
    leftFoot,
    leftLeg1,
    leftLeg2,
    rightFoot,
    rightLeg1,
    rightLeg2,
    mainThrust,
    microThrust1,
    microThrust2,
    sideThrust1,
    sideThrust2,
    bombDropPoint1,
    bombDropPoint2,
    legPivotR,
    legPivotL
;

#define BASEPIECE base
#define HITSPEED <105.0>
//how 'heavy' the unit is, on a scale of 1-10
#define UNITSIZE 4
#define MAXTILT 100

#include "../unit_hitbyweaponid_and_smoke.h"

static-var whichDrop;

Create()
{
    hide mainThrust;
    hide microThrust1;
    hide microThrust2;
    hide sideThrust1;
    hide sideThrust2;

	turn doorL to z-axis <90.0> now;
	turn doorR to z-axis <-90.0> now;

    turn legPivotR to z-axis <15> now;
    turn legPivotL to z-axis <-15> now;
}

Activate()
{
    show mainThrust;
    show microThrust1;
    show microThrust2;
    show sideThrust1;
    show sideThrust2;

    move rightLeg2 to y-axis [4.3] speed [3.8];
    move leftLeg2 to y-axis [4.3] speed [3.8];
    sleep 250;

    turn rightFoot to z-axis <-75> speed <60>;
    turn leftFoot to z-axis <75> speed <60>;

    move rightLeg1 to y-axis [3.5] speed [3.9];
    move leftLeg1 to y-axis [3.5] speed [3.9];
    // wait-for-move rightLeg1 along z-axis;
}

Deactivate()
{
    hide mainThrust;
    hide microThrust1;
    hide microThrust2;
    hide sideThrust1;
    hide sideThrust2;

    move rightLeg1 to y-axis [0] speed [3.5];
    move leftLeg1 to y-axis [0] speed [3.5];
    sleep 250;

    turn rightFoot to z-axis <0> speed <60>;
    turn leftFoot to z-axis <0> speed <60>;

    move rightLeg2 to y-axis [0] speed [4.3];
    move leftLeg2 to y-axis [0] speed [4.3];
    // wait-for-move rightLeg2 along z-axis;
}

QueryWeapon1(pieceIndex)
{
	if(whichDrop == 0) pieceIndex = bombDropPoint1;
    else if (whichDrop == 1) pieceIndex = bombDropPoint2;
}

Shot1(zero){
    whichDrop = !whichDrop;
}

AimWeapon1()
{
	// turn doorL to z-axis <0.0> speed <25.0>;
	// turn doorR to z-axis <0.0> speed <25.0>;
}

FireWeapon1(){
	turn doorL to z-axis <0.0> speed <180.0>;
	turn doorR to z-axis <0.0> speed <180.0>;
    sleep 1500;
	turn doorL to z-axis <90.0>  speed <90.0>;
	turn doorR to z-axis <-90.0> speed <90.0>;
}


Killed(severity, corpsetype)
{
	if( severity <= 25 )
	{
		corpsetype = 1 ;
		explode base type BITMAPONLY | NOHEATCLOUD;
		// explode doorr type FIRE | SMOKE | FALL | NOHEATCLOUD;
		// explode doorl type BITMAPONLY | NOHEATCLOUD;
		// explode thrusta type BITMAPONLY | NOHEATCLOUD;
		// explode thrustb type BITMAPONLY | NOHEATCLOUD;
		// explode thrustc type BITMAPONLY | NOHEATCLOUD;
		// explode drop type BITMAPONLY | NOHEATCLOUD;
		return(corpsetype);
	}
	if( severity <= 50 )
	{
		corpsetype = 2 ;
		explode base type BITMAPONLY | NOHEATCLOUD;
		// explode doorr type FIRE | SMOKE | FALL | NOHEATCLOUD;
		// explode doorl type FALL | NOHEATCLOUD;
		// explode thrusta type BITMAPONLY | NOHEATCLOUD;
		// explode thrustb type BITMAPONLY | NOHEATCLOUD;
		// explode thrustc type BITMAPONLY | NOHEATCLOUD;
		// explode drop type BITMAPONLY | NOHEATCLOUD;
		return(corpsetype);
	}
	if( severity <= 99 )
	{
		corpsetype = 3 ;
		explode base type BITMAPONLY | NOHEATCLOUD;
		// explode doorr type EXPLODE_ON_HIT | FIRE | SMOKE | FALL | NOHEATCLOUD;
		// explode doorl type EXPLODE_ON_HIT | FIRE | SMOKE | FALL | NOHEATCLOUD;
		// explode thrusta type BITMAPONLY | NOHEATCLOUD;
		// explode thrustb type BITMAPONLY | NOHEATCLOUD;
		// explode thrustc type BITMAPONLY | NOHEATCLOUD;
		// explode drop type BITMAPONLY | NOHEATCLOUD;
		return(corpsetype);
	}
	corpsetype = 3 ;
		explode base type BITMAPONLY | NOHEATCLOUD;
		// explode doorr type EXPLODE_ON_HIT | FIRE | SMOKE | FALL | NOHEATCLOUD;
		// explode doorl type EXPLODE_ON_HIT | FIRE | FALL | NOHEATCLOUD;
		// explode thrusta type BITMAPONLY | NOHEATCLOUD;
		// explode thrustb type BITMAPONLY | NOHEATCLOUD;
		// explode thrustc type BITMAPONLY | NOHEATCLOUD;
		// explode drop type EXPLODE_ON_HIT | FIRE | SMOKE | FALL | NOHEATCLOUD;
	return corpsetype;
}
