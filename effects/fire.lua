-- Effects for Fire / Flames / Napalm
local definitions = {
["fire-incinerator"] = {
     usedefaultexplosions = false,
     burned_area = {
       air                = true,
       class              = [[CBitmapMuzzleFlame]],
       count              = 1,
       ground             = true,
       underwater         = 1,
       water              = true,
       properties = {
         colormap           = [[0 0 0 0.1   0.08 0.06 0.06 0.2   0.12 0.1 0.1 0.75      0.12 0.1 0.1 0.80   0.12 0.1 0.1 0.80    0.12 0.1 0.1 0.80    0.11 0.08 0.08 0.45   0.10 0.07 0.07 0.2   0.08 0.06 0.06 0.2   0 0 0 0.1]],
         dir                = [[0, 1, 0]],
         frontoffset        = 0,
         fronttexture       = [[bloodcentersplatshwhite]],
         length             = 5,
         sidetexture        = [[none]],
         size               = [[21 r11]],
         sizegrowth         = 0.1,
         ttl                = 83,
         pos                = [[0, 4, 0]],
         rotParams          = [[0, 0, -180 r360]],
         alwaysvisible      = true,
         drawOrder          = -2,
         --castShadow         = true,
       },
     },
    fireflamearea = {
             air                = true,
             class              = [[CExpGenSpawner]],
             count              = 1, --60
             ground             = true,
             water              = true,
             underwater         = true,
             properties = {
                 delay              = [[0 r50]],
                 explosiongenerator = [[custom:fire-flames-small]],
                 pos                = [[-18 r36, 0 r10, -18 r36]],
                 --alwaysvisible      = true,
            },
        },
    fireflameground = {
             air                = true,
             class              = [[CExpGenSpawner]],
             count              = 1, --60
             ground             = true,
             water              = true,
             underwater         = true,
             properties = {
                 delay              = [[0 r50]],
                 explosiongenerator = [[custom:fire-burnground-small]],
                 pos                = [[-15 r30, 0 r5, -15 r30]],
                 --alwaysvisible      = true,
            },
        },
    fireburngroundcircle = {
          air                = false,
          class              = [[CBitmapMuzzleFlame]],
          count              = 0,
          ground             = true,
          underwater         = true,
          water              = true,
          properties = {
            --colormap           = [[0 0 0 0   0.06 0.04 0.02 0.006   0.10 0.08 0.04 0.008   0.18 0.12 0.08 0.010   0.4 0.35 0.3 0.15  0.18 0.12 0.08 0.010   0.10 0.08 0.04 0.005    0.06 0.04 0.02 0.004    0 0 0 0.01]],
            colormap           = [[0 0 0 0.01   0.40 0.40 0.48 0.12   0.67 0.69 0.9 0.85   0.64 0.67 0.79 0.55   0.68 0.78 0.88 0.85   0.02 0.02 0.03 0.44   0.026 0.026 0.026 0.40   0.02 0.02 0.02 0.30   0.023 0.023 0.023 0.38   0 0 0 0.03   0 0 0 0.01]],
            dir                = [[0, 1, 0]],
            --gravity            = [[0.0, 0.1, 0.0]],
            frontoffset        = 0,
            fronttexture       = [[FireBall02-anim]],
            animParams         = [[8,8,80 r50]],
            length             = 0,
            sidetexture        = [[none]],
            size               = [[10 r5]],
            sizegrowth         = [[-0.5 r2.2]],
            ttl                = 135,
            pos                = [[0, 8, 0]],
            rotParams          = [[-2 r4, -2 r4, -180 r360]],
            drawOrder          = 0,
            castShadow         = true,
          },
        },
   },

["fire-area-75"] = {
     usedefaultexplosions = false,
     burned_area = {
       air                = true,
       class              = [[CBitmapMuzzleFlame]],
       count              = 0,
       ground             = true,
       underwater         = 1,
       water              = true,
       properties = {
         colormap           = [[0 0 0 0.1   0.08 0.06 0.06 0.2   0.12 0.1 0.1 0.65      0.12 0.1 0.1 0.7   0.12 0.1 0.1 0.7    0.12 0.1 0.1 0.6    0.11 0.08 0.08 0.40   0.10 0.07 0.07 0.2   0.08 0.06 0.06 0.15   0 0 0 0.1]],
         dir                = [[0, 1, 0]],
         frontoffset        = 0,
         fronttexture       = [[bloodcentersplatshwhite]],
         length             = 15,
         sidetexture        = [[none]],
         size               = [[42 r22]],
         sizegrowth         = 0.1,
         ttl                = 330,
         pos                = [[0, 4, 0]],
         rotParams          = [[0, 0, -180 r360]],
         alwaysvisible      = true,
         drawOrder          = -2,
       },
     },
   --  flames = {
   --   air                = true,
   --   class              = [[CSimpleParticleSystem]],
   --   count              = 0,
   --   ground             = true,
   --   properties = {
   --     airdrag            = 0.97,
   --     colormap           = [[0.7 0.7 0.7 0.9   1.99 0.99 1 0.8  0.8 0.8 0.68 0.5   0.16 0.11 0.1 0.4   0.09 0.10 0.11 0.3   0 0 0 0.01]],
   --     directional        = false,
   --     emitrot            = 70,
   --     emitrotspread      = 40,
   --     emitvector         = [[0.3, 0.7, 0.3]],
   --     gravity            = [[0, 0.13, 0]],
   --     numparticles       = [[4 r4]],
   --     particlelife       = 24,
   --     particlelifespread = 7,
   --     particlesize       = 1,
   --     particlesizespread = 4,
   --     particlespeed      = 0.3,
   --     particlespeedspread = 0.6,
   --     rotParams          = [[-24 r48, -60 r120, -180 r360]],
   --     animParams         = [[8,8,20 r50]],
   --     pos                = [[-2 r4, 35 r8, -2 r4]],
   --     sizegrowth         = [[1.5 r2]],
   --     sizemod            = 0.92,
   --     texture            = [[FireBall02-anim]],
   --     drawOrder          = 1,
   --     },
   -- },
    fireflamearea = {
             air                = true,
             class              = [[CExpGenSpawner]],
             count              = 10, --60
             ground             = true,
             water              = true,
             underwater         = true,
             properties = {
                 delay              = [[i30]],
                 explosiongenerator = [[custom:fire-flames]],
                 pos                = [[-18 r36, 0 r10, -18 r36]],
            },
        },
    fireflameground = {
             air                = true,
             class              = [[CExpGenSpawner]],
             count              = 10, --60
             ground             = true,
             water              = true,
             underwater         = true,
             properties = {
                 delay              = [[r300]],
                 explosiongenerator = [[custom:fire-burnground]],
                 pos                = [[-15 r30, 0 r5, -15 r30]],
                 --alwaysvisible      = true,
           },
       },
   fireburngroundcircle = {
            air                = false,
            class              = [[CBitmapMuzzleFlame]],
            count              = 0,
            ground             = true,
            underwater         = true,
            water              = true,
            properties = {
              --colormap           = [[0 0 0 0   0.06 0.04 0.02 0.006   0.10 0.08 0.04 0.008   0.18 0.12 0.08 0.010   0.4 0.35 0.3 0.15  0.18 0.12 0.08 0.010   0.10 0.08 0.04 0.005    0.06 0.04 0.02 0.004    0 0 0 0.01]],
              --colormap           = [[0 0 0 0.01   0.40 0.40 0.48 0.12   0.67 0.69 0.9 0.85   0.64 0.67 0.79 0.55   0.68 0.78 0.88 0.85   0.02 0.02 0.03 0.44   0.026 0.026 0.026 0.40   0.02 0.02 0.02 0.30   0.023 0.023 0.023 0.38   0 0 0 0.03   0 0 0 0.01]],
              colormap            = [[0.4 0.25 0.1 0.75   1 0.66 0.45 0.95   0.9 0.8 0.66 1   0 0 0 0.01]],
              dir                = [[0, 1, 0]],
              --gravity            = [[0.0, 0.1, 0.0]],
              frontoffset        = 0,
              fronttexture       = [[BARFlame02]],
              animParams         = [[16,6,100 r50]],
              length             = 0,
              sidetexture        = [[none]],
              size               = [[70 r10]],
              sizegrowth         = [[0.1 r0.4]],
              ttl                = 270,
              pos                = [[0, 5, 0]],
              rotParams          = [[-2 r4, -2 r4, -180 r360]],
              drawOrder          = -1,
              castShadow         = true,
            },
        },
   },

   ["fire-flames"] = {
     usedefaultexplosions = false,
        flame1 = {
          air                = true,
          class              = [[CSimpleParticleSystem]],
          count              = 1,
          ground             = true,
          properties = {
            airdrag            = 0.88,
            colormap           = [[0 0 0 0.01   0.95 0.95 1 0.4  0.65 0.65 0.68 0.2   0.1 0.1 0.1 0.18   0.08 0.07 0.06 0.12   0 0 0 0.01]],
            directional        = false,
            emitrot            = 40,
            emitrotspread      = 30,
            emitvector         = [[0.2, -0.4, 0.2]],
            gravity            = [[0, 0.03 r0.04, 0]],
            numparticles       = [[0.50 r0.70]],
            particlelife       = 80,
            particlelifespread = 75,
            particlesize       = 35,
            particlesizespread = 57,
            particlespeed      = 1,
            particlespeedspread = 1.3,
            animParams         = [[8,8,90 r50]],
            rotParams          = [[-3 r6, -3 r6, -180 r360]],
            pos                = [[-4 r8, -5 r15, -4 r8]],
            sizegrowth         = [[1.6 r0.6]],
            sizemod            = 0.98,
            texture            = [[FireBall02-anim]],
            drawOrder          = 1,
            --castShadow         = true,
          },
        },
        blacksmoke = {
                air                = true,
                class              = [[CSimpleParticleSystem]],
                count              = 1,
                ground             = true,
                water              = true,
                properties = {
                    airdrag            = 0.70,
                    --colormap           = [[0.01 0.01 0.01 0.01   0.02 0.02 0.01 0.2   0.15 0.14 0.12 0.68   0.13 0.12 0.10 0.75   0.11 0.10 0.09 0.85  0.09 0.08 0.08 0.7    0.075 0.07 0.07 0.6   0.05 0.05 0.05 0.4   0.01 0.01 0.01 0.01]],
                    colormap           = [[0.01 0.01 0.01 0.01   0.02 0.02 0.01 0.2   0.15 0.14 0.12 0.68   0.11 0.10 0.09 0.85    0.075 0.07 0.07 0.6   0.01 0.01 0.01 0.01]],
                    directional        = false,
                    emitrot            = 90,
                    emitrotspread      = 70,
                    emitvector         = [[0.3, 1, 0.3]],
                    gravity            = [[-0.03 r0.06, 0.24 r0.3, -0.03 r0.06]],
                    numparticles       = [[0.55 r0.55]],
                    particlelife       = 110,
                    particlelifespread = 60,
                    particlesize       = 45,
                    particlesizespread = 60,
                    particlespeed      = 3,
                    particlespeedspread = 2,
                    rotParams          = [[-15 r30, -2 r4, -180 r360]],
                    pos                = [[0.0, 30, 0.0]],
                    sizegrowth         = [[0.55 r0.55]],
                    sizemod            = 1,
                    texture            = [[smoke-ice-anim]],
                    animParams         = [[8,8,150 r80]],
                    useairlos          = true,
                    alwaysvisible      = true,
                    castShadow         = true,
                    drawOrder          = 1,
                    castShadow         = true,
                },
            },
    },
    
	["fire-flames-small"] = {
     usedefaultexplosions = false,
        flame1 = {
          air                = true,
          class              = [[CSimpleParticleSystem]],
          count              = 1,
          ground             = true,
          properties = {
            airdrag            = 0.88,
            colormap           = [[0 0 0 0.01   0.95 0.95 1 0.4  0.65 0.65 0.68 0.2   0.1 0.1 0.1 0.18   0.08 0.07 0.06 0.12   0 0 0 0.01]],
            directional        = false,
            emitrot            = 40,
            emitrotspread      = 30,
            emitvector         = [[0.2, -0.4, 0.2]],
            gravity            = [[0, 0.01 r0.04, 0]],
            numparticles       = [[0.50 r0.65]],
            particlelife       = 30,
            particlelifespread = 27,
            particlesize       = 11,
            particlesizespread = 35,
            particlespeed      = 1,
            particlespeedspread = 1.3,
            animParams         = [[8,8,120 r50]],
            rotParams          = [[-5 r10, -5 r10, -180 r360]],
            pos                = [[-3 r8, 0 r15, -3 r8]],
            sizegrowth         = [[1.2 r0.45]],
            sizemod            = 0.98,
            texture            = [[FireBall02-anim]],
            drawOrder          = 0,
            --castShadow         = true,
          },
        },
    },

  ["fire-burnground-small"] = {
    usedefaultexplosions = false,
    -- flame = {
    --   air                = true,
    --   class              = [[CSimpleParticleSystem]],
    --   count              = 2,
    --   ground             = true,
    --   properties = {
    --     airdrag            = 0.98,
    --     colormap           = [[0.14 0.14 0.10 0.3   0.81 0.89 1 1   0.75 0.76 0.89 0.75   0.72 0.75 1 1    0.026 0.026 0.026 0.58   0.022 0.022 0.022 0.35   0.02 0.02 0.02 0.25   0.023 0.023 0.023 0.15   0 0 0 0.03   0 0 0 0.01]],
    --     directional        = true,
    --     emitrot            = 65,
    --     emitrotspread      = 65,
    --     emitvector         = [[0.28, 1, 0.28]],
    --     gravity            = [[-0.02 r0.05, 0.01 r0.07, -0.02 r0.05]],
    --     numparticles       = [[0.70 r0.65]],
    --     particlelife       = 80,
    --     particlelifespread = 65,
    --     particlesize       = 14,
    --     particlesizespread = 48,
    --     particlespeed      = 0.45,
    --     particlespeedspread = 0.4,
    --     rotParams          = [[-5 r10, 0, -180 r360]],
    --     animParams         = [[8,8,80 r50]],
    --     pos                = [[-3 r6, -5 r6, -3 r6]],
    --     sizegrowth         = [[1.22 r0.8]],
    --     sizemod            = 0.98,
    --     texture            = [[FireBall02-anim]],
    --     drawOrder          = 1,
    --   },
    -- },
    flamematt = {
      air                = true,
      class              = [[CSimpleParticleSystem]],
      count              = 2,
      ground             = true,
      properties = {
        airdrag            = 0.96,
        colormap           = [[0.4 0.25 0.1 0.75   1 0.66 0.45 0.95   0.9 0.8 0.66 1   0.85 0.52 0.28 1    0.80 0.47 0.24 0.98   0.75 0.41 0.20 0.97   0.72 0.38 0.18 0.96   0.6 0.30 0.12 0.9    0.18 0.10 0.05 0.55   0.023 0.022 0.022 0.2   0 0 0 0.01]],

        directional        = false,
        emitrot            = 65,
        emitrotspread      = 65,
        emitvector         = [[0.28, 1, 0.28]],
        gravity            = [[-0.03 r0.05, 0.03 r0.08, -0.03 r0.05]],
        numparticles       = [[0.68 r0.65]],
        particlelife       = 40,
        particlelifespread = 30,
        particlesize       = 20,
        particlesizespread = 50,
        particlespeed      = 0.20,
        particlespeedspread = 0.20,
        rotParams          = [[-5 r10, 0, -180 r360]],
        animParams         = [[16,6,80 r55]],
        pos                = [[-3 r6, -8 r6, -3 r6]],
        sizegrowth         = [[0.8 r0.5]],
        sizemod            = 0.98,
        texture            = [[BARFlame02]],
        drawOrder          = 1,
        castShadow         = true,
      },
    },
    sparks = {
      air                = true,
      class              = [[CSimpleParticleSystem]],
      count              = 1,
      ground             = true,
      water              = true,
      underwater         = true,
      properties = {
        airdrag            = 0.92,
        colormap           = [[0 0 0 0.01   0 0 0 0.01  1 0.88 0.77 0.030   0.8 0.55 0.3 0.015   0 0 0 0]],
        directional        = true,
        emitrot            = 35,
        emitrotspread      = 22,
        emitvector         = [[0, 1, 0]],
        gravity            = [[-0.4 r0.8, -0.1 r0.3, -0.4 r0.8]],
        numparticles       = [[0.65 r0.75]],
        particlelife       = 6,
        particlelifespread = 6,
        particlesize       = -12,
        particlesizespread = -3,
        particlespeed      = 4,
        particlespeedspread = 3,
        pos                = [[-7 r14, 17 r15, -7 r14]],
        sizegrowth         = 0.04,
        sizemod            = 0.91,
        texture            = [[gunshotxl2]],
        useairlos          = false,
        drawOrder          = 2,
      },
    },
  },

    ["fire-burnground"] = {
    usedefaultexplosions = false,
    -- flame = {
    --   air                = true,
    --   class              = [[CSimpleParticleSystem]],
    --   count              = 2,
    --   ground             = true,
    --   properties = {
    --     airdrag            = 0.98,
    --     colormap           = [[0.14 0.14 0.10 0.3   0.81 0.89 1 1   0.75 0.76 0.89 0.75   0.72 0.75 1 1    0.026 0.026 0.026 0.58   0.022 0.022 0.022 0.35   0.02 0.02 0.02 0.25   0.023 0.023 0.023 0.15   0 0 0 0.03   0 0 0 0.01]],
    --     directional        = true,
    --     emitrot            = 65,
    --     emitrotspread      = 65,
    --     emitvector         = [[0.28, 1, 0.28]],
    --     gravity            = [[-0.02 r0.05, 0.01 r0.07, -0.02 r0.05]],
    --     numparticles       = [[0.70 r0.65]],
    --     particlelife       = 80,
    --     particlelifespread = 65,
    --     particlesize       = 14,
    --     particlesizespread = 48,
    --     particlespeed      = 0.45,
    --     particlespeedspread = 0.4,
    --     rotParams          = [[-5 r10, 0, -180 r360]],
    --     animParams         = [[8,8,80 r50]],
    --     pos                = [[-3 r6, -5 r6, -3 r6]],
    --     sizegrowth         = [[1.22 r0.8]],
    --     sizemod            = 0.98,
    --     texture            = [[FireBall02-anim]],
    --     drawOrder          = 1,
    --   },
    -- },
    flamematt = {
      air                = true,
      class              = [[CSimpleParticleSystem]],
      count              = 2,
      ground             = true,
      properties = {
        airdrag            = 0.92,
        colormap           = [[0.25 0.22 0.18 0.75   0.75 0.77 0.71 1   0.72 0.51 0.39 1    0.67 0.47 0.34 0.99   0.63 0.41 0.27 0.98   0.58 0.37 0.29 0.97   0.48 0.31 0.22 0.91    0.11 0.11 0.12 0.50   0.016 0.011 0.07 0.45   0 0 0 0.01]],

        directional        = false,
        emitrot            = 90,
        emitrotspread      = 5,
        emitvector         = [[0.32, 0.7, 0.32]],
        gravity            = [[-0.025 r0.05, 0.03 r0.11, -0.025 r0.05]],
        numparticles       = [[0.67 r0.69]],
        particlelife       = 50,
        particlelifespread = 60,
        particlesize       = 46,
        particlesizespread = 130,
        particlespeed      = 3.20,
        particlespeedspread = 5.20,
        rotParams          = [[-5 r10, -20 r40, -180 r360]],
        animParams         = [[16,6,88 r55]],
        pos                = [[-3 r6, -25 r12, -3 r6]],
        sizegrowth         = [[1.10 r1.05]],
        sizemod            = 0.98,
        texture            = [[BARFlame02]],
        drawOrder          = 2,
        castShadow         = true,
      },
    },
    flamedark = {
      air                = true,
      class              = [[CSimpleParticleSystem]],
      count              = 1,
      ground             = true,
      properties = {
        airdrag            = 0.93,
        colormap           = [[0.26 0.29 0.21 0.1   0.36 0.27 0.29 0.90   0.34 0.43 0.40 0.88   0.33 0.29 0.20 0.85    0.33 0.27 0.18 0.83   0.29 0.22 0.14 0.80   0.29 0.20 0.13 0.75   0.22 0.16 0.11 0.55    0.05 0.06 0.09 0.35   0.021 0.022 0.023 0.2   0 0 0 0.01]],

        directional        = false,
        emitrot            = 85,
        emitrotspread      = 25,
        emitvector         = [[0.28, 0.9, 0.28]],
        gravity            = [[-0.02 r0.04, 0.015 r0.032, -0.02 r0.04]],
        numparticles       = [[0.32 r0.68]],
        particlelife       = 25,
        particlelifespread = 35,
        particlesize       = 72,
        particlesizespread = 100,
        particlespeed      = 0.10,
        particlespeedspread = 0.16,
        rotParams          = [[-5 r10, 0, -180 r360]],
        animParams         = [[16,6,80 r55]],
        pos                = [[0, 60 r25, 0]],
        sizegrowth         = [[1.3 r1.1]],
        sizemod            = 0.99,
        texture            = [[BARFlame02]],
        drawOrder          = 3,
        castShadow         = true,
      },
    },
    sparks = {
      air                = true,
      class              = [[CSimpleParticleSystem]],
      count              = 1,
      ground             = true,
      water              = true,
      underwater         = true,
      properties = {
        airdrag            = 0.92,
        colormap           = [[0 0 0 0.01   0 0 0 0.01  1 0.88 0.77 0.030   0.8 0.55 0.3 0.015   0 0 0 0]],
        directional        = true,
        emitrot            = 35,
        emitrotspread      = 22,
        emitvector         = [[0, 1, 0]],
        gravity            = [[-0.4 r0.8, -0.1 r0.3, -0.4 r0.8]],
        numparticles       = [[0.50 r0.65]],
        particlelife       = 11,
        particlelifespread = 11,
        particlesize       = -24,
        particlesizespread = -8,
        particlespeed      = 9,
        particlespeedspread = 4,
        pos                = [[-7 r14, 17 r15, -7 r14]],
        sizegrowth         = 0.04,
        sizemod            = 0.91,
        texture            = [[gunshotxl2]],
        useairlos          = false,
        drawOrder          = 2,
      },
    },
  },

  --["fire-flames-backup"] = {
    --  usedefaultexplosions = false,
    --      extrafires = {
    --           air                = true,
    --           class              = [[CSimpleParticleSystem]],
    --           count              = 1,
    --           ground             = true,
    --           properties = {
    --             airdrag            = 0.95,
    --             colormap           = [[0 0 0 0.01   0.33 0.18 0.45 0.18   0.55 0.52 0.42 0.35   0.35 0.35 0.28 0.25  0.5 0.5 0.42 0.32   0.32 0.28 0.18 0.12    0.01 0 0 0.01]],
    --             directional        = false,
    --             emitrot            = 90,
    --             emitrotspread      = 1,
    --             emitvector         = [[dir]],
    --             gravity            = [[0, 0.06, 0]],
    --             numparticles       = [[0.23 r0.81]],
    --             particlelife       = 9,
    --             particlelifespread = 18,
    --             particlesize       = 11,
    --             particlesizespread = 15,
    --             particlespeed      = 0,
    --             particlespeedspread = 0,
    --             rotParams          = [[-90 r180, -50 r100, -180 r360]],
    --             pos                = [[-3 r6, 20, -3 r6]],
    --             sizegrowth         = [[1.3 r0.35]],
    --             sizemod            = 0.99,
    --             texture            = [[fire]],
    --             drawOrder          = 0,
    --           },
    --         },
    --     flame1 = {
    --       air                = true,
    --       class              = [[CSimpleParticleSystem]],
    --       count              = 1,
    --       ground             = true,
    --       properties = {
    --         airdrag            = 0.99,
    --         colormap           = [[0 0 0 0.01   0.95 0.95 1 0.4  0.65 0.65 0.68 0.2   0.1 0.1 0.1 0.18   0.08 0.07 0.06 0.12   0 0 0 0.01]],
    --         directional        = false,
    --         emitrot            = 70,
    --         emitrotspread      = 40,
    --         emitvector         = [[0.2, -0.4, 0.2]],
    --         gravity            = [[0, 0.23 r0.09, 0]],
    --         numparticles       = [[0.45 r0.62]],
    --         particlelife       = 14,
    --         particlelifespread = 18,
    --         particlesize       = 4.9,
    --         particlesizespread = 22,
    --         particlespeed      = -2,
    --         particlespeedspread = 0.9,
    --         rotParams          = [[-120 r240, -80 r160, -180 r360]],
    --         pos                = [[-3 r8, 25 r10, -3 r8]],
    --         sizegrowth         = [[1.6 r0.6]],
    --         sizemod            = 0.98,
    --         texture            = [[flame_alt2]],
    --         drawOrder          = 2,
    --       },
    --     },

    --     flame2 = {
    --       air                = true,
    --       class              = [[CSimpleParticleSystem]],
    --       count              = 1,
    --       ground             = true,
    --       properties = {
    --         airdrag            = 0.99,
    --         colormap           = [[0 0 0 0.01   0.95 0.95 1 0.25  0.65 0.65 0.68 0.15   0.1 0.1 0.1 0.16   0.08 0.07 0.06 0.11   0 0 0 0.01]],
    --         directional        = false,
    --         emitrot            = 70,
    --         emitrotspread      = 40,
    --         emitvector         = [[0.2, -0.4, 0.2]],
    --         gravity            = [[0, 0.23 r0.09, 0]],
    --         numparticles       = [[0.45 r0.62]],
    --         particlelife       = 14,
    --         particlelifespread = 18,
    --         particlesize       = 4.9,
    --         particlesizespread = 22,
    --         particlespeed      = -2,
    --         particlespeedspread = 0.9,
    --         rotParams          = [[-180 r360, -80 r160, -180 r360]],
    --         pos                = [[-3 r8, 25 r10, -3 r8]],
    --         sizegrowth         = [[1.6 r0.6]],
    --         sizemod            = 0.98,
    --         texture            = [[fire]],
    --         drawOrder          = 1,
    --       },
    --     },
    -- },

  --not finalized
  ["fire-area-150"] = {
      usedefaultexplosions = false,
      burned_area = {
        air                = true,
        class              = [[CBitmapMuzzleFlame]],
        count              = 0,
        ground             = true,
        underwater         = 1,
        water              = true,
        properties = {
          colormap           = [[0 0 0 0.1   0.08 0.06 0.06 0.2   0.12 0.1 0.1 0.75      0.12 0.1 0.1 0.80   0.12 0.1 0.1 0.80    0.12 0.1 0.1 0.80    0.11 0.08 0.08 0.45   0.10 0.07 0.07 0.2   0.08 0.06 0.06 0.2   0 0 0 0.1]],
          dir                = [[0, 1, 0]],
          frontoffset        = 0,
          fronttexture       = [[bloodcentersplatshwhite]],
          length             = 15,
          sidetexture        = [[none]],
          size               = [[84 r44]],
          sizegrowth         = 0.1,
          ttl                = 330,
          pos                = [[0, 4, 0]],
          rotParams          = [[0, 0, -180 r360]],
          alwaysvisible      = true,
          drawOrder          = -2,
        },
      },
    --  flames = {
    --   air                = true,
    --   class              = [[CSimpleParticleSystem]],
    --   count              = 0,
    --   ground             = true,
    --   properties = {
    --     airdrag            = 0.97,
    --     colormap           = [[0.7 0.7 0.7 0.9   1.99 0.99 1 0.8  0.8 0.8 0.68 0.5   0.16 0.11 0.1 0.4   0.09 0.10 0.11 0.3   0 0 0 0.01]],
    --     directional        = false,
    --     emitrot            = 70,
    --     emitrotspread      = 40,
    --     emitvector         = [[0.3, 0.7, 0.3]],
    --     gravity            = [[0, 0.13, 0]],
    --     numparticles       = [[4 r4]],
    --     particlelife       = 24,
    --     particlelifespread = 7,
    --     particlesize       = 1,
    --     particlesizespread = 4,
    --     particlespeed      = 0.3,
    --     particlespeedspread = 0.6,
    --     rotParams          = [[-24 r48, -60 r120, -180 r360]],
    --     animParams         = [[8,8,20 r50]],
    --     pos                = [[-2 r4, 35 r8, -2 r4]],
    --     sizegrowth         = [[1.5 r2]],
    --     sizemod            = 0.92,
    --     texture            = [[FireBall02-anim]],
    --     drawOrder          = 1,
    --     },
    -- },
    fireflamearea = {
             air                = true,
             class              = [[CExpGenSpawner]],
             count              = 25, --60
             ground             = true,
             water              = true,
             underwater         = true,
             properties = {
                 delay              = [[i12]],
                 explosiongenerator = [[custom:fire-flames]],
                 pos                = [[-66 r132, 0 r10, -66 r132]],
            },
        },
    fireflameground = {
             air                = true,
             class              = [[CExpGenSpawner]],
             count              = 24, --60
             ground             = true,
             water              = true,
             underwater         = true,
             properties = {
                 delay              = [[0 r300]],
                 explosiongenerator = [[custom:fire-burnground]],
                 pos                = [[-60 r120, 0 r5, -60 r120]],
            },
       },
   fireburngroundcircle = {
         air                = false,
         class              = [[CBitmapMuzzleFlame]],
         count              = 0,
         ground             = true,
         underwater         = true,
         water              = true,
         properties = {
           --colormap           = [[0 0 0 0   0.06 0.04 0.02 0.006   0.10 0.08 0.04 0.008   0.18 0.12 0.08 0.010   0.4 0.35 0.3 0.15  0.18 0.12 0.08 0.010   0.10 0.08 0.04 0.005    0.06 0.04 0.02 0.004    0 0 0 0.01]],
           colormap           = [[0 0 0 0.01   0.40 0.40 0.48 0.12   0.67 0.69 0.9 0.85   0.64 0.67 0.79 0.55   0.68 0.78 0.88 0.85   0.02 0.02 0.03 0.44   0.026 0.026 0.026 0.40   0.02 0.02 0.02 0.30   0.023 0.023 0.023 0.38   0 0 0 0.03   0 0 0 0.01]],
           dir                = [[0, 1, 0]],
           --gravity            = [[0.0, 0.1, 0.0]],
           frontoffset        = 0,
           fronttexture       = [[FireBall02-anim]],
           animParams         = [[8,8,80 r50]],
           length             = 0,
           sidetexture        = [[none]],
           size               = [[68 r36]],
           sizegrowth         = [[-0.5 r2.2]],
           ttl                = 270,
           pos                = [[0, 5, 0]],
           rotParams          = [[-2 r4, -2 r4, -180 r360]],
           drawOrder          = -1,
          },
        },
   },

  -- CEGs for revision of unit_area_timed_damage -------------------------------

  -- Effects trigger on a fixed interval after the first impact, so the inital
  -- explosion has to add fire fx to look different from a normal arty explo.
  ["fire-explosion-small"] = {
    usedefaultexplosions = false,
    flame = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      underwater = true,
      water      = true,
      unit       = true,
      properties = {
        airdrag             = 0.93,
        colormap            = [[1.0 0.9 0.7 1  0.8 0.55 0.33 0.85   0.65 0.65 0.2 0.25   0.022 0.022 0.022 0.3   0 0 0 0.01]],
        directional         = true,
        emitrot             = 0,
        emitrotspread       = 0,
        emitvector          = [[0, 1, 0]],
        gravity             = [[-0.09 r0.18, 0.03 r0.03, -0.09 r0.18]],
        numparticles        = [[1.2 r1]],
        particlelife        = 90,
        particlelifespread  = 12,
        particlesize        = 64,
        particlesizespread  = 32,
        particlespeed       = 0.4,
        particlespeedspread = 0.2,
        pos                 = [[-10 r20, -5 r20, -10 r20]],
        rotParams           = [[-5 r10, 0, -180 r360]],
        sizegrowth          = [[2.5 r1.5]],
        sizemod             = 0.96,
        animParams          = [[16,6,80 r80]],
        texture             = [[BARFlame02]],
        useairlos           = true,
        alwaysVisible       = true,
        drawOrder           = 1,
      },
    },
    groundflash_small = {
      class      = [[CSimpleGroundFlash]],
      count      = 1,
      air        = true,
      ground     = true,
      underwater = false,
      water      = false,
      properties = {
        colormap   = [[1 0.7 0.3 0.32   0 0 0 0.01]],
        size       = 25,
        sizegrowth = -0.5,
        ttl        = 14,
        texture    = [[groundflash]],
      },
    },
    groundflash_large = {
      class      = [[CSimpleGroundFlash]],
      count      = 1,
      air        = true,
      ground     = true,
      underwater = false,
      water      = false,
      properties = {
        colormap   = [[1 0.7 0.3 0.11   0 0 0 0.01]],
        size       = 50,
        sizegrowth = -0.5,
        ttl        = 14,
        texture    = [[groundflash]],
      },
    },
    centerflare = {
      class      = [[CHeatCloudProjectile]],
      count      = 1,
      air        = true,
      ground     = true,
      underwater = true,
      water      = true,
      properties = {
        heat        = 7,
        heatfalloff = 1.5,
        maxheat     = 16,
        pos         = [[r-2 r2, 5, r-2 r2]],
        size        = 1.0,
        sizegrowth  = 6,
        speed       = [[0, 1 0, 0]],
        texture     = [[orangenovaexplo]],
        drawOrder   = 2,
      },
    },
    explosion = {
      class      = [[CSimpleParticleSystem]],
      count      = 2,
      air        = true,
      ground     = true,
      underwater = false,
      water      = true,
      unit       = true,
      properties = {
        airdrag             = 0.83,
        colormap            = [[0 0 0 0   1 0.9 0.6 0.09   0.9 0.5 0.2 0.066   0.66 0.28 0.04 0.033   0 0 0 0]],
        directional         = true,
        emitrot             = 40,
        emitrotspread       = 28,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, 0.01, 0]],
        numparticles        = 2,
        particlelife        = 8,
        particlelifespread  = 6,
        particlesize        = 1.1,
        particlesizespread  = 4.5,
        particlespeed       = 1.1,
        particlespeedspread = 2.5,
        pos                 = [[0, 8, 0]],
        sizegrowth          = [[0.8 r0.8]],
        sizemod             = 1.0,
        texture             = [[flashside3]],
        useairlos           = false,
        drawOrder           = 1,
        castShadow          = true,
      },
    },
    explosionfire = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      water      = true,
      underwater = true,
      unit       = true,
      feature    = true,
      properties = {
        airdrag             = 0.73,
        colormap            = [[0 0 0 0   1 0.9 0.6 0.09   0.9 0.5 0.2 0.066   0.66 0.28 0.04 0.033   0 0 0 0]],
        directional         = false,
        emitrot             = 45,
        emitrotspread       = 32,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, 0.3, 0]],
        numparticles        = 1,
        particlelife        = 34,
        particlelifespread  = 34,
        particlesize        = 32,
        particlesizespread  = 18,
        particlespeed       = 1.0,
        particlespeedspread = 1.5,
        pos                 = [[0, 8, 0]],
        sizegrowth          = [[0.8 r0.8]],
        sizemod             = 1.0,
        texture             = [[BARFlame02]],
        animParams          = [[16,6,80 r60]],
        rotParams           = [[-5 r10, -5 r10, -180 r360]],
        useairlos           = false,
        drawOrder           = 1,
        castShadow          = true,
      },
    },
    dustparticles = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      underwater = true,
      water      = true,
      properties = {
        airdrag             = 0.88,
        colormap            = [[1 0.85 0.6 0.22  1 0.63 0.3 0.12  1 0.52 0.2 0.06   0 0 0 0.01]],
        directional         = true,
        emitrot             = 45,
        emitrotspread       = 32,
        emitvector          = [[0.5, 1, 0.5]],
        gravity             = [[0, -0.011, 0]],
        numparticles        = 1,
        particlelife        = 4,
        particlelifespread  = 2,
        particlesize        = 2.5,
        particlesizespread  = 0.66,
        particlespeed       = 0.55,
        particlespeedspread = 0.2,
        pos                 = [[0, 0, 0]],
        sizegrowth          = 2.2,
        sizemod             = 1.0,
        texture             = [[randomdots]],
      },
    },
    innersmoke = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      water      = false,
      properties = {
        airdrag = 0.8,
        colormap =
        [[1 0.66 0.4 0.45    0.3 0.2 0.13 0.4   0.18 0.15 0.11 0.35    0.13 0.12 0.1 0.32   0.11 0.1 0.093 0.25   0.063 0.062 0.058 0.17    0 0 0 0.01]],
        emitrot = 25,
        emitrotspread = 40,
        emitvector = [[0, 1, 0]],
        gravity = [[0, 0.018, 0]],
        numparticles = 1,
        particlelife = 22,
        particlelifespread = 22,
        particlesize = 6,
        particlesizespread = 5.5,
        particlespeed = 0.8,
        particlespeedspread = 3.2,
        pos = [[r-1 r1, 0, r-1 r1]],
        sizegrowth = 0.6,
        sizemod = 0.99,
        texture = [[dirtpuff]],
      },
    },
    outersmoke = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      water      = false,
      properties = {
        airdrag = 0.4,
        alwaysvisible = 0,
        colormap =
        [[1 0.66 0.4 0.45    0.3 0.2 0.13 0.4   0.18 0.15 0.11 0.35    0.13 0.12 0.1 0.32   0.11 0.1 0.093 0.25   0.063 0.062 0.058 0.17    0 0 0 0.01]],
        directional = 0,
        emitrot = 33,
        emitrotspread = 50,
        emitvector = [[0, 1, 0]],
        gravity = [[0, -0.02, 0]],
        numparticles = 1,
        particlelife = 22,
        particlelifespread = 25,
        particlesize = 8.5,
        particlesizespread = 3.5,
        particlespeed = 1,
        particlespeedspread = 3.3,
        pos = [[r-1 r1, 0, r-1 r1]],
        sizegrowth = 0.35,
        sizemod = 1.0,
        texture = [[fogdirty]],
      },
    },
    dirt = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = false,
      ground     = true,
      underwater = false,
      water      = false,
      unit       = false,
      nounit     = true,
      properties = {
        airdrag             = 0.98,
        colormap            =
        [[0.04 0.03 0.01 0   0.1 0.07 0.033 0.66   0.1 0.07 0.033 0.58   0.1 0.07 0.033 0.5   0.1 0.07 0.033 0.4   0 0 0 0  ]],
        directional         = true,
        emitrot             = 22,
        emitrotspread       = 20,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, -0.2, 0]],
        numparticles        = 1,
        particlelife        = 8,
        particlelifespread  = 4,
        particlesize        = 1.2,
        particlesizespread  = -1,
        particlespeed       = 2.2,
        particlespeedspread = 3.9,
        pos                 = [[0, 4, 0]],
        sizegrowth          = -0.01,
        sizemod             = 1,
        texture             = [[bigexplosmoke]],
        useairlos           = false,
      },
    },
    dirt2 = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = false,
      ground     = false,
      underwater = false,
      water      = false,
      unit       = false,
      nounit     = true,
      properties = {
        airdrag             = 1,
        colormap            =
        [[0.04 0.03 0.01 0   0.1 0.07 0.033 0.66   0.1 0.07 0.033 0.58   0.1 0.07 0.033 0.5   0.1 0.07 0.033 0.4   0 0 0 0  ]],
        directional         = true,
        emitrot             = -5,
        emitrotspread       = 11,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, -0.3, 0]],
        numparticles        = 1,
        particlelife        = 18,
        particlelifespread  = 4,
        particlesize        = 1.23,
        particlesizespread  = -1,
        particlespeed       = 1.66,
        particlespeedspread = 2.4,
        pos                 = [[0, 4, 0]],
        sizegrowth          = -0.01,
        sizemod             = 1,
        texture             = [[bigexplosmoke]],
        useairlos           = false,
      },
    },
    clouddust = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      properties = {
        airdrag             = 0.91,
        colormap            =
        [[0 0 0 0.01   0.025 0.025 0.025 0.035  0.06 0.06 0.06 0.08  0.05 0.05 0.05 0.065  0.026 0.026 0.026 0.035  0 0 0 0.01]],
        directional         = false,
        emitrot             = 45,
        emitrotspread       = 4,
        emitvector          = [[0.25, 0.8, 0.25]],
        gravity             = [[0, 0.015, 0]],
        numparticles        = 1,
        particlelife        = 22,
        particlelifespread  = 44,
        particlesize        = 8,
        particlesizespread  = 8,
        particlespeed       = 0.5,
        particlespeedspread = 1.5,
        pos                 = [[0, 6, 0]],
        sizegrowth          = 0.1,
        sizemod             = 1.0,
        texture             = [[bigexplosmoke]],
      },
    },
    shard1 = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      underwater = false,
      unit       = true,
      nounit     = false,
      properties = {
        airdrag             = 0.93,
        colormap            = [[1 0.55 0.45 1    0.55 0.44 0.38 1    0.36 0.34 0.33 1    0 0 0 0.01]],
        directional         = true,
        emitrot             = 35,
        emitrotspread       = 30,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, -0.3, 0]],
        numparticles        = 1,
        particlelife        = 28,
        particlelifespread  = 0,
        particlesize        = 1.1,
        particlesizespread  = 1.8,
        particlespeed       = 1.35,
        particlespeedspread = 2.65,
        pos                 = [[0, 2, 0]],
        sizegrowth          = 0,
        sizemod             = 1,
        texture             = [[shard1]],
        useairlos           = false,
      },
    },
    shard2 = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      underwater = false,
      unit       = true,
      nounit     = false,
      properties = {
        airdrag             = 0.93,
        colormap            = [[1 0.55 0.45 1    0.55 0.44 0.38 1    0.36 0.34 0.33 1    0 0 0 0.01]],
        directional         = true,
        emitrot             = 35,
        emitrotspread       = 30,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, -0.3, 0]],
        numparticles        = 1,
        particlelife        = 28,
        particlelifespread  = 0,
        particlesize        = 1.3,
        particlesizespread  = 1.6,
        particlespeed       = 1.35,
        particlespeedspread = 2.65,
        pos                 = [[1, 2, 0]],
        sizegrowth          = 0,
        sizemod             = 1,
        texture             = [[shard2]],
        useairlos           = false,
      },
    },
    shard3 = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      underwater = false,
      unit       = true,
      nounit     = false,
      properties = {
        airdrag             = 0.93,
        colormap            = [[1 0.55 0.45 1    0.55 0.44 0.38 1    0.36 0.34 0.33 1    0 0 0 0.01]],
        directional         = true,
        emitrot             = 35,
        emitrotspread       = 30,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, -0.3, 0]],
        numparticles        = 1,
        particlelife        = 28,
        particlelifespread  = 0,
        particlesize        = 1.8,
        particlesizespread  = 2,
        particlespeed       = 1.35,
        particlespeedspread = 1.65,
        pos                 = [[0, 2, 0]],
        sizegrowth          = 0,
        sizemod             = 1,
        texture             = [[shard3]],
        useairlos           = false,
      },
    },
    sparks = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      water      = true,
      underwater = false,
      properties = {
        airdrag             = 0.94,
        colormap            = [[0.9 0.85 0.77 0.017   0.8 0.55 0.3 0.011   0 0 0 0]],
        directional         = true,
        emitrot             = 60,
        emitrotspread       = 55,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, -0.15, 0]],
        numparticles        = 1,
        particlelife        = 6,
        particlelifespread  = 8,
        particlesize        = 17,
        particlesizespread  = 14,
        particlespeed       = 1.75,
        particlespeedspread = 2,
        pos                 = [[0, 2, 0]],
        sizegrowth          = 0.88,
        sizemod             = 0.85,
        texture             = [[gunshotglow]],
        useairlos           = false,
        drawOrder           = 2,
      },
    },
    watersparks = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = false,
      ground     = false,
      underwater = true,
      water      = true,
      properties = {
        airdrag             = 0.92,
        colormap            = [[0.44 0.44 0.48 0.015   0.3 0.31 0.35 0.01   0 0 0 0.005]],
        directional         = true,
        emitrot             = 5,
        emitrotspread       = 10,
        emitvector          = [[0, 1, 0]],
        gravity             = [[0, 0, 0]],
        numparticles        = 2,
        particlelife        = 16,
        particlelifespread  = 26,
        particlesize        = 6.5,
        particlesizespread  = 20,
        particlespeed       = 1.8,
        particlespeedspread = 4,
        pos                 = [[0 r-10 r10,-32, 0 r-10 r10]],
        rotParams           = [[-15 r30, -5 r10, 180]],
        sizegrowth          = -0.5,
        sizemod             = 0.99,
        texture             = [[gunshotxl]],
        useairlos           = false,
      },
    },
    outerflash = {
      class      = [[CHeatCloudProjectile]],
      count      = 1,
      air        = true,
      ground     = true,
      underwater = true,
      water      = true,
      properties = {
        heat        = 7,
        heatfalloff = 1.5,
        maxheat     = 15,
        pos         = [[r-2 r2, 5, r-2 r2]],
        size        = 6,
        sizegrowth  = 0.6,
        speed       = [[0, 1 0, 0]],
        texture     = [[orangenovaexplo]],
      },
    },
  },

  ["fire-flames-repeat"] = {
    usedefaultexplosions = false,
    flame1 = {
      air        = true,
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      ground     = true,
      properties = {
        airdrag             = 0.88,
        colormap            =
        [[0 0 0 0.01   0.9 0.87 0.87 0.4  0.65 0.65 0.4 0.2   0.65 0.65 0.4 0.2   0.13 0.13 0.02 0.12   0.08 0.08 0.02 0.07   0.025 0.02 0.01 0.02   0 0 0 0.01]],
        directional         = false,
        emitrot             = 40,
        emitrotspread       = 30,
        emitvector          = [[-0.4 r0.2, -0.4, -0.4 r0.2]],
        gravity             = [[0, 0.03 r0.04, 0]],
        numparticles        = [[0.18 r1]],
        particlelife        = 54,
        particlelifespread  = 110,
        particlesize        = 32,
        particlesizespread  = 64,
        particlespeed       = 1,
        particlespeedspread = 1.3,
        animParams          = [[8,8,90 r50]],
        rotParams           = [[-3 r6, -3 r6, -180 r360]],
        pos                 = [[-4 r8, -5 r35, -4 r8]],
        sizegrowth          = [[1.6 r0.6]],
        sizemod             = 0.98,
        texture             = [[FireBall02-anim]],
        castShadow          = false,
        drawOrder           = 0,
      },
    },
    blacksmoke = {
      air        = true,
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      ground     = true,
      water      = true,
      properties = {
        airdrag             = 0.8,
        colormap            =
        [[0.01 0.01 0.01 0.01   0.03 0.03 0.01 0.2   0.01 0.01 0.01 0.32   0.1 0.1 0.1 0.64   0.04 0.04 0.04 0.32    0.02 0.02 0.02 0.17   0.01 0.01 0.01 0.01]],
        directional         = false,
        emitrot             = 90,
        emitrotspread       = 70,
        emitvector          = [[r0.2 -0.4, 1, r0.2 -0.4]],
        gravity             = [[-0.03 r0.06, 0.24 r0.3, -0.03 r0.06]],
        numparticles        = [[0.08 r1]],
        particlelife        = 180,
        particlelifespread  = 60,
        particlesize        = 54,
        particlesizespread  = 84,
        particlespeed       = 3,
        particlespeedspread = 2,
        rotParams           = [[-10 r20, -1 r2, -180 r360]],
        pos                 = [[0.0, 0, 0.0]],
        sizegrowth          = [[0.55 r0.85]],
        sizemod             = 1,
        texture             = [[smoke-ice-anim]],
        animParams          = [[8,8,200 r200]],
        useairlos           = true,
        alwaysvisible       = true,
        castShadow          = true,
        drawOrder           = 1,
      },
    },
  },

  ["fire-burnground-repeat"] = {
    usedefaultexplosions = false,
    flamemattalways = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      properties = {
        airdrag             = 0.9,
        colormap            =
        [[0.25 0.22 0.18 0.6   0.75 0.77 0.40 0.8   0.72 0.58 0.39 1    0.67 0.54 0.34 0.9   0.63 0.49 0.27 0.8   0.58 0.39 0.29 0.7   0.48 0.29 0.22 0.6    0.11 0.06 0.12 0.50   0.016 0.009 0.07 0.4   0 0 0 0.01]],
        directional         = false,
        emitrot             = 90,
        emitrotspread       = 5,
        emitvector          = [[0, 0.7, 0]],
        gravity             = [[-0.025 r0.05, 0.03 r0.11, -0.025 r0.05]],
        numparticles        = 1, -- always one, a little larger, try to guarantee the area is covered basically
        particlelife        = 44,
        particlelifespread  = 44,
        particlesize        = 64,
        particlesizespread  = 100,
        particlespeed       = 3.20,
        particlespeedspread = 5.20,
        rotParams           = [[-5 r10, -20 r40, -180 r360]],
        animParams          = [[16,6,88 r55]],
        pos                 = [[-3 r6, -12 r25, -3 r6]],
        sizegrowth          = [[1.10 r1.05]],
        sizemod             = 0.98,
        texture             = [[BARFlame02]],
        castShadow         = false,
        drawOrder           = 2,
      },
    },
    flamemattrandom = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      properties = {
        airdrag             = 0.92,
        colormap            =
        [[0.25 0.22 0.18 0.6   0.75 0.77 0.40 0.8   0.72 0.58 0.39 1    0.67 0.54 0.34 0.9   0.63 0.49 0.27 0.8   0.58 0.39 0.29 0.7   0.48 0.29 0.22 0.6    0.11 0.06 0.12 0.50   0.016 0.009 0.07 0.4   0 0 0 0.01]],
        directional         = false,
        emitrot             = 90,
        emitrotspread       = 5,
        emitvector          = [[0, 0.7, 0]],
        gravity             = [[-0.025 r0.05, 0.03 r0.11, -0.025 r0.05]],
        numparticles        = [[0.1 r1]], -- less often, spawn smaller fires to give a more natural look
        particlelife        = 44,
        particlelifespread  = 66,
        particlesize        = 46,
        particlesizespread  = 130,
        particlespeed       = 3.20,
        particlespeedspread = 5.20,
        rotParams           = [[-5 r10, -20 r40, -180 r360]],
        animParams          = [[16,6,88 r55]],
        pos                 = [[-32 r16, -12 r44, -32 r16]],
        sizegrowth          = [[1.10 r1.05]],
        sizemod             = 0.98,
        texture             = [[BARFlame02]],
        castShadow         = false,
        drawOrder           = 2,
      },
    },
    flamedark = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      properties = {
        airdrag             = 0.93,
        colormap            =
        [[0.01 0.01 0.01 0.01   0.02 0.02 0.01 0.2   0.26 0.2 0.18 0.333   0.36 0.27 0.29 0.72   0.34 0.28 0.40 0.88   0.33 0.29 0.20 0.7    0.33 0.27 0.18 0.83   0.29 0.22 0.14 0.80   0.29 0.20 0.13 0.75   0.22 0.16 0.11 0.55    0.05 0.06 0.09 0.35   0.021 0.022 0.023 0.2   0.01 0.01 0.01 0.01   0 0 0 0.01]],
        directional         = false,
        emitrot             = 85,
        emitrotspread       = 25,
        emitvector          = [[r0.28 0.56, 0.9, r0.28 0.56]],
        gravity             = [[-0.02 r0.04, 0.015 r0.032, -0.02 r0.04]],
        numparticles        = [[0.3 r0.7]],
        particlelife        = 44,
        particlelifespread  = 44,
        particlesize        = 44,
        particlesizespread  = 88,
        particlespeed       = 0.10,
        particlespeedspread = 0.16,
        rotParams           = [[-5 r10, 0, -180 r360]],
        animParams          = [[16,6,80 r55]],
        pos                 = [[0, 60 r25, 0]],
        sizegrowth          = [[1.3 r1.1]],
        sizemod             = 0.99,
        texture             = [[BARFlame02]],
        castShadow          = false,
        drawOrder           = 3,
      },
    },
    sparks = {
      class      = [[CSimpleParticleSystem]],
      count      = 1,
      air        = true,
      ground     = true,
      water      = true,
      underwater = true,
      properties = {
        airdrag             = 0.92,
        colormap            = [[0 0 0 0.01   0 0 0 0.01  1 0.88 0.77 0.030   0.8 0.55 0.3 0.015   0 0 0 0]],
        directional         = true,
        emitrot             = 35,
        emitrotspread       = 22,
        emitvector          = [[0, 1, 0]],
        gravity             = [[-0.4 r0.8, -0.1 r0.3, -0.4 r0.8]],
        numparticles        = [[0.23 r1]],
        particlelife        = 11,
        particlelifespread  = 11,
        particlesize        = -24,
        particlesizespread  = -8,
        particlespeed       = 9,
        particlespeedspread = 4,
        pos                 = [[-7 r14, 17 r15, -7 r14]],
        sizegrowth          = 0.04,
        sizemod             = 0.91,
        texture             = [[gunshotxl2]],
        useairlos           = false,
        drawOrder           = 2,
      },
    },
  },

  ["fire-area-repeat"] = {
    usedefaultexplosions = false,
    under = {
      air                = false,
      class              = [[CBitmapMuzzleFlame]],
      count              = 1,
      ground             = true,
      underwater         = true,
      water              = true,
      properties = {
        colormap           = [[0 0 0 0.01   0.5 0.43 0.2 0.18  0.65 0.65 0.3 0.4   0.3 0.2 0.1 0.28   0.08 0.05 0.07 0.12   0.08 0.05 0.07 0.08   0 0 0 0.01]],
        dir                = [[dir]],
        frontoffset        = 0,
        fronttexture       = [[FireBall02-anim]],
        animParams         = [[8,8,90 r60]],
        length             = 0,
        sidetexture        = [[none]],
        size               = 75,
        sizegrowth         = [[-0.5 r1.2]],
        ttl                = 22 * 2.5,
        pos                = [[0, 5, 0]],
        rotParams          = [[-4 r8, -4 r8, -180 r360]],
        drawOrder          = -2,
        castShadow         = false,
      },
    },
    fireflamearea = {
      class              = [[CExpGenSpawner]],
      count              = 1,
      air                = true,
      ground             = true,
      water              = true,
      underwater         = true,
      properties = {
        delay              = [[r9]],
        dir                = [[dir]],
        explosiongenerator = [[custom:fire-flames-repeat]],
        pos                = [[-18 r36, 4 r28, -18 r36]],
      },
    },
    fireflameground = {
      class              = [[CExpGenSpawner]],
      count              = 1,
      air                = true,
      ground             = true,
      water              = true,
      underwater         = true,
      properties = {
          delay              = [[r9]],
          dir                = [[dir]],
          explosiongenerator = [[custom:fire-burnground-repeat]],
          pos                = [[-15 r30, 4 r12, -15 r30]],
      },
    },
  },
}

-- Keep array in sync with values in unit_area_timed_damage:
local areaSizePresets = { 37.5, 46, 54, 63, 75, 88, 100, 125, 150, 175, 200, 225, 250, 275, 300 }

local debugEffects = false
local debugCircle = {
  class      = [[CBitmapMuzzleFlame]],
  count      = 1,
  air        = true,
  ground     = true,
  underwater = true,
  water      = true,
  properties = {
    colormap     = [[0 0 0 0.1   0 0 0 1   0 0 0 0.1]],
    dir          = [[dir]],
    drawOrder    = 0,
    frontoffset  = 0,
    fronttexture = [[blastwave]],
    length       = 0,
    pos          = [[0, 8, 0]],
    rotParams    = [[0, 0, 0]],
    sidetexture  = [[none]],
    size         = 75,
    sizegrowth   = [[0]],
    ttl          = 30,
  },
}

local function circularAreaOfEffect(radius, ypos)
  ypos = ypos or [[0]]
  local angle = "r6.283 y0 "
  local distance = "r1 p0.5 y1 "..radius.." x1 y1 "
  local xpos = "a0 s1 x1"
  local zpos = "1.57 "..xpos
  return angle..distance..xpos..", "..ypos..", "..zpos
end

-- At higher particle counts in a CEG, swap in a larger fireball texture.
local radiusFlame = 56
local radiusFlameLarge = 84
definitions["fire-flames-large-repeat"] = table.copy(definitions["fire-flames-repeat"])
definitions["fire-flames-large-repeat"].flame1.properties.particlesize = radiusFlameLarge
definitions["fire-flames-large-repeat"].flame1.properties.particlesizespread = radiusFlameLarge * 0.8
definitions["fire-flames-large-repeat"].blacksmoke.properties.particlesize = radiusFlameLarge
definitions["fire-flames-large-repeat"].blacksmoke.properties.particlesizespread = radiusFlameLarge
definitions["fire-burnground-large-repeat"] = table.copy(definitions["fire-burnground-repeat"])
definitions["fire-burnground-large-repeat"].flamemattalways.properties.airdrag = 0.92
definitions["fire-burnground-large-repeat"].flamemattalways.properties.particlesize = radiusFlameLarge
definitions["fire-burnground-large-repeat"].flamemattalways.properties.particlesizespread = radiusFlameLarge * 1.4 -- this is starting to be too large for the texture
definitions["fire-burnground-large-repeat"].flamemattrandom.properties.particlesize = radiusFlame
definitions["fire-burnground-large-repeat"].flamemattrandom.properties.particlesizespread = radiusFlameLarge * 1.4

for ii = 1, #areaSizePresets do
  local expgen = table.copy(definitions['fire-area-repeat'])
  local radius = areaSizePresets[ii]

  local radiusFlame = 56
  local inset = radiusFlame * 0.5

  local count, delay, posArea, posGround
  count = math.ceil((1/5) * (radius / radiusFlame) ^ 2) -- longer particle life => decrease this fraction
  if count > 4 then
    -- Reduce the total particle count by spawning larger fire particles
    expgen.fireflamearea.properties.explosiongenerator = [[custom:fire-flames-large-repeat]]
    expgen.fireflameground.properties.explosiongenerator = [[custom:fire-burnground-large-repeat]]
    radiusFlame = 84
    inset = radiusFlame * 0.5
    count = math.ceil((1/5) * (radius / radiusFlame) ^ 2) -- longer particle life => decrease this fraction
  end

  local framesDelayMax = math.floor(math.sqrt(2 * count * math.sqrt(22)))
  delay = framesDelayMax > 4 and ("r"..framesDelayMax) or nil

  posArea = circularAreaOfEffect(radius - inset, [[8 r]]..radiusFlame/2)
  posGround = circularAreaOfEffect(radius - inset, [[-8 r]]..radiusFlame/3)

  expgen.fireflamearea.count = count
  expgen.fireflameground.count = count

  expgen.fireflamearea.properties.delay = delay
  expgen.fireflameground.properties.delay = delay

  expgen.fireflamearea.properties.pos = posArea
  expgen.fireflameground.properties.pos = posGround

  expgen.under.properties.size = (radius + radiusFlame) * 0.5

  if debugEffects == true then
    expgen.debugcircle = table.copy(debugCircle)
    expgen.debugcircle.properties.size = radius
  end

  local name = 'fire-area-'..math.floor(radius)..'-repeat'
  definitions[name] = expgen
end

definitions['fire-area-repeat'] = nil

definitions["fire-explosion-medium"] = table.copy(definitions["fire-explosion-small"])
definitions["fire-explosion-medium"].explosionfire.properties.particlesize = 64

definitions["fire-explosion-large"] = table.copy(definitions["fire-explosion-small"])
definitions["fire-explosion-large"].explosionfire.count = 2
definitions["fire-explosion-large"].explosionfire.properties.particlesize = 120
definitions["fire-explosion-large"].groundflash_large.properties.size = 150
definitions["fire-explosion-large"].centerflare.properties.size = 64
definitions["fire-explosion-large"].explosion.properties.size = 64
definitions["fire-explosion-large"].outersmoke.properties.particlesize = 120
definitions["fire-explosion-large"].outerflash.properties.size = 64
definitions["fire-explosion-large"].shard1.count = 2
definitions["fire-explosion-large"].shard2.count = 2
definitions["fire-explosion-large"].shard3.count = 2
definitions["fire-explosion-large"].sparks.count = 3

return definitions
